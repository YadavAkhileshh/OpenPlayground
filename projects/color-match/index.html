<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé® Color Match Mayhem ¬∑ React Fast!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
        }
        body {
            background: linear-gradient(45deg, #0b0f1a, #1a1f30);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .game-container {
            background: #222842;
            padding: 2rem;
            border-radius: 4rem;
            box-shadow: 0 30px 30px -10px #000000cc, inset 0 -3px 0 #0f1322, inset 0 3px 15px #5f6b9e;
            border: 3px solid #5f72b0;
        }
        h1 {
            text-align: center;
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ffd966, #ffb347);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 5px 15px #00000080;
            letter-spacing: 3px;
            margin-bottom: 0.5rem;
        }
        .sub {
            text-align: center;
            color: #b1c9ff;
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }
        .main-panel {
            display: flex;
            gap: 2rem;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }
        .game-area {
            background: #1b2137;
            padding: 2rem;
            border-radius: 3rem;
            box-shadow: inset 0 0 0 3px #0f1423, 0 15px 20px black;
        }
        .color-box {
            width: 300px;
            height: 300px;
            border-radius: 3rem;
            margin-bottom: 2rem;
            box-shadow: 0 15px 25px black, inset 0 0 30px #ffffff40;
            transition: background-color 0.15s ease;
            border: 4px solid #ffffff60;
            cursor: pointer;
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        .color-option {
            width: 140px;
            height: 100px;
            border-radius: 2rem;
            border: none;
            cursor: pointer;
            box-shadow: 0 8px 0 #00000080, 0 10px 15px black;
            transition: 0.07s ease;
            border: 2px solid #ffffff80;
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 5px black;
        }
        .color-option:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #00000080, 0 5px 12px black;
        }
        .color-option:disabled {
            opacity: 0.5;
            transform: translateY(4px);
            box-shadow: 0 4px 0 #00000080;
            cursor: not-allowed;
        }
        .stats-panel {
            background: #1e233b;
            padding: 2rem 1.8rem;
            border-radius: 3rem;
            min-width: 250px;
            box-shadow: inset 0 -3px 0 #0b0f1c, 0 15px 20px black;
            border: 2px solid #6f7fc9;
        }
        .stat-item {
            background: #13182b;
            border-radius: 2rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
            border: 1px solid #5b6db3;
        }
        .stat-label {
            color: #a7bcff;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .stat-value {
            color: white;
            font-size: 3rem;
            font-weight: 800;
            line-height: 1.2;
        }
        .timer-bar {
            background: #0f1425;
            height: 30px;
            border-radius: 3rem;
            margin: 1.5rem 0;
            overflow: hidden;
            border: 2px solid #5060a3;
        }
        .timer-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #47c77b, #a2e65c);
            transition: width 0.3s linear;
        }
        .timer-fill.warning {
            background: linear-gradient(90deg, #ffaa47, #ff6347);
        }
        .control-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        button {
            background: #3f4e8c;
            border: none;
            color: white;
            font-size: 1.2rem;
            font-weight: 700;
            padding: 0.8rem 1.5rem;
            border-radius: 3rem;
            box-shadow: 0 6px 0 #1e2650;
            cursor: pointer;
            transition: 0.07s;
            border: 1px solid #98abff;
            flex: 1;
        }
        button:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #1e2650;
        }
        .high-score {
            background: #2a3153;
            border-radius: 2rem;
            padding: 0.8rem;
            text-align: center;
            color: #ffd966;
            font-weight: 600;
        }
        .message {
            text-align: center;
            margin-top: 1rem;
            font-size: 1.3rem;
            font-weight: 600;
            min-height: 3rem;
            color: #ffbe5c;
        }
        .footer {
            margin-top: 1.5rem;
            text-align: center;
            color: #6f7db9;
        }
    </style>
</head>
<body>
<div class="game-container">
    <h1>üé® COLOR MATCH</h1>
    <div class="sub">click the button that matches the box color</div>

    <div class="main-panel">
        <div class="game-area">
            <div class="color-box" id="colorBox"></div>
            <div class="options-grid" id="optionsGrid">
                <!-- buttons will be generated by js -->
            </div>
        </div>

        <div class="stats-panel">
            <div class="stat-item">
                <div class="stat-label">SCORE</div>
                <div class="stat-value" id="scoreDisplay">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ROUND</div>
                <div class="stat-value" id="roundDisplay">1</div>
            </div>
            
            <div class="timer-bar">
                <div class="timer-fill" id="timerFill" style="width: 100%"></div>
            </div>

            <div class="high-score">
                üèÜ HIGH SCORE: <span id="highScoreDisplay">0</span>
            </div>

            <div class="control-buttons">
                <button id="startBtn">‚ñ∂ START</button>
                <button id="resetBtn">‚ü≤ RESET</button>
            </div>

            <div class="message" id="messageBox">üëá press START</div>
        </div>
    </div>
    <div class="footer">
        ‚ö° faster clicks = more points ¬∑ wrong color = game over
    </div>
</div>

<script>
    (function() {
        // ---------- COLOR MATCH GAME ----------
        const colorBox = document.getElementById('colorBox');
        const optionsGrid = document.getElementById('optionsGrid');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const roundDisplay = document.getElementById('roundDisplay');
        const highScoreDisplay = document.getElementById('highScoreDisplay');
        const timerFill = document.getElementById('timerFill');
        const messageBox = document.getElementById('messageBox');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');

        // Game state
        let score = 0;
        let round = 1;
        let highScore = localStorage.getItem('colorMatchHighScore') || 0;
        let gameActive = false;
        let timeLeft = 3.0; // seconds per round
        let timerInterval = null;
        let currentColor = '';
        let currentOptions = [];
        
        // Color palette
        const colors = [
            { name: 'RED', code: '#ff4444' },
            { name: 'BLUE', code: '#4444ff' },
            { name: 'GREEN', code: '#44aa44' },
            { name: 'YELLOW', code: '#ffff44' },
            { name: 'PURPLE', code: '#aa44ff' },
            { name: 'ORANGE', code: '#ff8844' },
            { name: 'PINK', code: '#ff88aa' },
            { name: 'CYAN', code: '#44ffff' }
        ];

        highScoreDisplay.textContent = highScore;

        // Generate random colors for options
        function getRandomColors(excludeColor, count = 4) {
            let available = colors.filter(c => c.code !== excludeColor.code);
            let selected = [];
            
            // Shuffle and pick
            for (let i = 0; i < count - 1; i++) {
                if (available.length === 0) break;
                const randomIndex = Math.floor(Math.random() * available.length);
                selected.push(available[randomIndex]);
                available.splice(randomIndex, 1);
            }
            
            // Add the correct color
            selected.push(excludeColor);
            
            // Shuffle final array
            for (let i = selected.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [selected[i], selected[j]] = [selected[j], selected[i]];
            }
            
            return selected;
        }

        // New round
        function newRound() {
            if (!gameActive) return;
            
            // Stop previous timer
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Pick random color for box
            const randomIndex = Math.floor(Math.random() * colors.length);
            currentColor = colors[randomIndex];
            colorBox.style.backgroundColor = currentColor.code;
            
            // Generate options (including correct color)
            currentOptions = getRandomColors(currentColor, 4);
            
            // Render option buttons
            renderOptions();
            
            // Reset timer
            timeLeft = Math.max(2.0, 3.0 - round * 0.1); // Gets faster each round
            updateTimerBar();
            
            // Start timer countdown
            timerInterval = setInterval(() => {
                timeLeft -= 0.1;
                updateTimerBar();
                
                if (timeLeft <= 0) {
                    // Time's up - game over
                    gameOver('‚è∞ TIME\'S UP!');
                }
            }, 100);
        }

        // Render color options
        function renderOptions() {
            let html = '';
            currentOptions.forEach((color, index) => {
                html += `<button class="color-option" style="background-color: ${color.code};" data-color="${color.code}" data-index="${index}">${color.name}</button>`;
            });
            optionsGrid.innerHTML = html;
        }

        // Update timer bar
        function updateTimerBar() {
            if (!gameActive) return;
            
            const percent = (timeLeft / 3.0) * 100;
            timerFill.style.width = Math.max(0, percent) + '%';
            
            // Add warning class
            if (percent < 30) {
                timerFill.classList.add('warning');
            } else {
                timerFill.classList.remove('warning');
            }
            
            if (timeLeft <= 0) {
                timerFill.style.width = '0%';
            }
        }

        // Handle option click
        function handleOptionClick(e) {
            if (!e.target.classList.contains('color-option')) return;
            if (!gameActive) return;
            
            const selectedColor = e.target.dataset.color;
            
            // Check if correct
            if (selectedColor === currentColor.code) {
                // Correct!
                score += Math.floor(timeLeft * 10) + 5; // Bonus for faster clicks
                round++;
                
                scoreDisplay.textContent = score;
                roundDisplay.textContent = round;
                
                messageBox.textContent = '‚úÖ CORRECT! +' + (Math.floor(timeLeft * 10) + 5);
                messageBox.style.color = '#a5ffa5';
                
                // New round
                newRound();
            } else {
                // Wrong color - game over
                gameOver('‚ùå WRONG COLOR!');
            }
        }

        // Game over
        function gameOver(message) {
            gameActive = false;
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Update high score
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('colorMatchHighScore', highScore);
                highScoreDisplay.textContent = highScore;
                message += ' üèÜ NEW HIGH SCORE!';
            }
            
            messageBox.textContent = message;
            messageBox.style.color = '#ffaa5c';
            
            // Disable options
            document.querySelectorAll('.color-option').forEach(btn => {
                btn.disabled = true;
            });
            
            startBtn.disabled = false;
        }

        // Start game
        function startGame() {
            // Reset state
            score = 0;
            round = 1;
            gameActive = true;
            
            scoreDisplay.textContent = score;
            roundDisplay.textContent = round;
            messageBox.textContent = 'üéØ GO!';
            messageBox.style.color = '#ffbe5c';
            
            // Enable buttons
            document.querySelectorAll('.color-option').forEach(btn => {
                btn.disabled = false;
            });
            
            startBtn.disabled = true;
            
            // Start first round
            newRound();
        }

        // Reset game
        function resetGame() {
            gameActive = false;
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            score = 0;
            round = 1;
            scoreDisplay.textContent = score;
            roundDisplay.textContent = round;
            
            // Reset timer bar
            timeLeft = 3.0;
            timerFill.style.width = '100%';
            timerFill.classList.remove('warning');
            
            // Random static display
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            colorBox.style.backgroundColor = randomColor.code;
            
            // Show options
            currentOptions = getRandomColors(randomColor, 4);
            renderOptions();
            
            document.querySelectorAll('.color-option').forEach(btn => {
                btn.disabled = true;
            });
            
            messageBox.textContent = 'üëá PRESS START';
            messageBox.style.color = '#ffbe5c';
            startBtn.disabled = false;
        }

        // Event listeners
        optionsGrid.addEventListener('click', handleOptionClick);
        
        startBtn.addEventListener('click', startGame);
        
        resetBtn.addEventListener('click', resetGame);

        // Initial setup
        resetGame();

        // Keyboard support (number keys 1-4)
        document.addEventListener('keydown', (e) => {
            if (!gameActive) return;
            
            const key = e.key;
            if (key >= '1' && key <= '4') {
                const index = parseInt(key) - 1;
                const buttons = document.querySelectorAll('.color-option');
                if (buttons[index]) {
                    buttons[index].click();
                }
            }
        });

        // Prevent button double-click issues
        document.querySelectorAll('button').forEach(btn => {
            btn.addEventListener('mousedown', (e) => e.preventDefault());
        });
    })();
</script>
</body>
</html>