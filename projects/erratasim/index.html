<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErrataSim - Human Error Simulation Tool</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ErrataSim</h1>
            <p class="subtitle">Human Error Simulation & Analysis</p>
        </header>

        <div class="main-grid">
            <section class="control-panel">
                <div class="panel-header">
                    <h2>Simulation Parameters</h2>
                </div>
                
                <div class="parameter-group">
                    <div class="parameter">
                        <label for="fatigue">Fatigue Level</label>
                        <div class="slider-container">
                            <input type="range" id="fatigue" min="0" max="100" value="30" class="slider">
                            <span class="value" id="fatigue-value">30%</span>
                        </div>
                        <div class="parameter-info">Increases error probability and reaction time</div>
                    </div>

                    <div class="parameter">
                        <label for="stress">Stress Level</label>
                        <div class="slider-container">
                            <input type="range" id="stress" min="0" max="100" value="40" class="slider">
                            <span class="value" id="stress-value">40%</span>
                        </div>
                        <div class="parameter-info">Amplifies misclick radius and input jitter</div>
                    </div>

                    <div class="parameter">
                        <label for="distraction">Distraction Level</label>
                        <div class="slider-container">
                            <input type="range" id="distraction" min="0" max="100" value="25" class="slider">
                            <span class="value" id="distraction-value">25%</span>
                        </div>
                        <div class="parameter-info">Increases chance of wrong target selection</div>
                    </div>

                    <div class="parameter">
                        <label for="duration">Simulation Duration (seconds)</label>
                        <div class="slider-container">
                            <input type="range" id="duration" min="10" max="120" value="30" class="slider">
                            <span class="value" id="duration-value">30s</span>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="start-sim" class="btn btn-primary">Start Simulation</button>
                    <button id="stop-sim" class="btn btn-secondary" disabled>Stop</button>
                    <button id="reset-sim" class="btn btn-tertiary">Reset</button>
                </div>

                <div class="stats-panel">
                    <h3>Real-time Statistics</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <span class="stat-label">Total Interactions</span>
                            <span class="stat-value" id="stat-total">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Errors Injected</span>
                            <span class="stat-value error" id="stat-errors">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Error Rate</span>
                            <span class="stat-value" id="stat-rate">0%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Avg Recovery Time</span>
                            <span class="stat-value" id="stat-recovery">0ms</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Misclicks</span>
                            <span class="stat-value" id="stat-misclicks">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Delayed Reactions</span>
                            <span class="stat-value" id="stat-delays">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Wrong Inputs</span>
                            <span class="stat-value" id="stat-wrong">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Corrections Made</span>
                            <span class="stat-value" id="stat-corrections">0</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="simulation-area">
                <div class="panel-header">
                    <h2>Interaction Simulation</h2>
                    <span class="sim-status" id="sim-status">Ready</span>
                </div>
                
                <div class="task-container" id="task-container">
                    <div class="task-prompt" id="task-prompt">
                        Click START SIMULATION to begin
                    </div>
                    
                    <div class="interaction-zone" id="interaction-zone">
                    </div>
                </div>

                <div class="error-log-container">
                    <h3>Error Event Log</h3>
                    <div class="error-log" id="error-log">
                        <div class="log-entry info">System initialized. Ready for simulation.</div>
                    </div>
                </div>
            </section>

            <section class="heatmap-panel">
                <div class="panel-header">
                    <h2>Error Heatmap</h2>
                    <div style="display: flex; gap: 8px;">
                        <button id="test-heatmap" class="btn-small">Test Data</button>
                        <button id="clear-heatmap" class="btn-small">Clear</button>
                    </div>
                </div>
                <canvas id="heatmap-canvas" width="600" height="400"></canvas>
                <div class="heatmap-legend">
                    <div class="legend-item">
                        <div class="legend-color low"></div>
                        <span>Low</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color medium"></div>
                        <span>Medium</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color high"></div>
                        <span>High</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color critical"></div>
                        <span>Critical</span>
                    </div>
                </div>
            </section>

            <section class="replay-panel">
                <div class="panel-header">
                    <h2>Replay Timeline</h2>
                    <div class="replay-controls">
                        <button id="replay-play" class="btn-icon" disabled title="Play">▶</button>
                        <button id="replay-pause" class="btn-icon" disabled title="Pause">⏸</button>
                        <button id="replay-reset" class="btn-icon" disabled title="Reset">⏮</button>
                        <span id="replay-speed" class="speed-indicator">1x</span>
                        <button id="replay-speed-up" class="btn-icon" disabled title="Speed Up">⏩</button>
                    </div>
                </div>

                <div class="timeline-container">
                    <canvas id="timeline-canvas" width="1200" height="150"></canvas>
                    <div class="timeline-scrubber" id="timeline-scrubber"></div>
                    <div class="timeline-info" id="timeline-info">No replay data available</div>
                </div>

                <div class="event-details" id="event-details">
                    <h4>Event Details</h4>
                    <div id="event-details-content">
                        Hover over timeline events to see details
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
