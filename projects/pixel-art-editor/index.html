<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelCanvas Pro | Advanced Pixel Art Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-palette"></i>
                <h1>PixelCanvas<span class="version">v3.1</span></h1>
            </div>
            
            <div class="header-controls">
                <button class="icon-btn" id="newBtn" title="New (Ctrl+N)">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="icon-btn" id="saveBtn" title="Save (Ctrl+S)">
                    <i class="fas fa-save"></i>
                </button>
                <button class="icon-btn" id="openBtn" title="Open (Ctrl+O)">
                    <i class="fas fa-folder-open"></i>
                </button>
                <button class="icon-btn" id="exportBtn" title="Export (Ctrl+E)">
                    <i class="fas fa-download"></i>
                </button>
                <button class="icon-btn" id="importBtn" title="Import Image (Ctrl+I)">
                    <i class="fas fa-file-import"></i>
                </button>
                <button class="icon-btn" id="undoBtn" title="Undo (Ctrl+Z)">
                    <i class="fas fa-undo"></i>
                </button>
                <button class="icon-btn" id="redoBtn" title="Redo (Ctrl+Y)">
                    <i class="fas fa-redo"></i>
                </button>
                <button class="icon-btn" id="fullscreenBtn" title="Fullscreen (F11)">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Sidebar -->
            <nav class="sidebar left-sidebar">
                <div class="sidebar-section">
                    <h3 class="section-title"><i class="fas fa-brush"></i> Tools</h3>
                    <div class="tool-grid">
                        <button class="tool-btn active" data-tool="pencil" title="Pencil (P)">
                            <i class="fas fa-pencil-alt"></i>
                            <span>Pencil</span>
                        </button>
                        <button class="tool-btn" data-tool="eraser" title="Eraser (E)">
                            <i class="fas fa-eraser"></i>
                            <span>Eraser</span>
                        </button>
                        <button class="tool-btn" data-tool="bucket" title="Bucket Fill (B)">
                            <i class="fas fa-fill-drip"></i>
                            <span>Bucket</span>
                        </button>
                        <button class="tool-btn" data-tool="picker" title="Color Picker (I)">
                            <i class="fas fa-eye-dropper"></i>
                            <span>Picker</span>
                        </button>
                        <button class="tool-btn" data-tool="line" title="Line (L)">
                            <i class="fas fa-slash"></i>
                            <span>Line</span>
                        </button>
                        <button class="tool-btn" data-tool="rectangle" title="Rectangle (R)">
                            <i class="fas fa-square"></i>
                            <span>Rect</span>
                        </button>
                        <button class="tool-btn" data-tool="circle" title="Circle (C)">
                            <i class="fas fa-circle"></i>
                            <span>Circle</span>
                        </button>
                        <button class="tool-btn" data-tool="spray" title="Spray (S)">
                            <i class="fas fa-spray-can"></i>
                            <span>Spray</span>
                        </button>
                        <button class="tool-btn" data-tool="move" title="Move (M)">
                            <i class="fas fa-arrows-alt"></i>
                            <span>Move</span>
                        </button>
                        <button class="tool-btn" data-tool="select" title="Select (V)">
                            <i class="fas fa-mouse-pointer"></i>
                            <span>Select</span>
                        </button>
                        <button class="tool-btn" data-tool="text" title="Text (T)">
                            <i class="fas fa-font"></i>
                            <span>Text</span>
                        </button>
                        <button class="tool-btn" data-tool="gradient" title="Gradient (G)">
                            <i class="fas fa-sliders-h"></i>
                            <span>Gradient</span>
                        </button>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="section-title"><i class="fas fa-palette"></i> Colors</h3>
                    <div class="color-picker-container">
                        <div class="current-color" id="currentColorDisplay" title="Current Color"></div>
                        <input type="color" id="colorPicker" value="#ff0000">
                        <div class="color-preview" id="previousColorDisplay" title="Previous Color"></div>
                    </div>
                    <div class="color-palette-grid" id="colorPalette">
                        <!-- Palette colors will be generated dynamically -->
                    </div>
                    <div class="recent-colors" id="recentColors">
                        <!-- Recent colors will be added here -->
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="section-title"><i class="fas fa-sliders-h"></i> Brush Settings</h3>
                    <div class="control-group">
                        <div class="control-item">
                            <label>Size: <span id="brushSizeValue">1</span></label>
                            <input type="range" id="brushSize" min="1" max="20" value="1">
                        </div>
                        <div class="control-item">
                            <label>Opacity: <span id="opacityValue">100%</span></label>
                            <input type="range" id="opacity" min="1" max="100" value="100">
                        </div>
                        <div class="control-item" id="sprayDensityControl" style="display: none;">
                            <label>Density: <span id="sprayDensityValue">30%</span></label>
                            <input type="range" id="sprayDensity" min="1" max="100" value="30">
                        </div>
                        <div class="control-item" id="shapeFillControl" style="display: none;">
                            <label>Fill Style</label>
                            <select id="shapeFillStyle">
                                <option value="outline">Outline</option>
                                <option value="filled">Filled</option>
                                <option value="both">Outline + Fill</option>
                            </select>
                        </div>
                        <div class="control-item" id="gradientControl" style="display: none;">
                            <label>Gradient Type</label>
                            <select id="gradientType">
                                <option value="linear">Linear</option>
                                <option value="radial">Radial</option>
                            </select>
                        </div>
                    </div>
                </div>
            </nav>
            
            <!-- Main Canvas Area -->
            <section class="canvas-area">
                <div class="canvas-toolbar">
                    <div class="toolbar-left">
                        <div class="canvas-size-control">
                            <select id="canvasWidth">
                                <option value="16">16</option>
                                <option value="32" selected>32</option>
                                <option value="64">64</option>
                                <option value="128">128</option>
                                <option value="256">256</option>
                                <option value="512">512</option>
                            </select>
                            <span>x</span>
                            <select id="canvasHeight">
                                <option value="16">16</option>
                                <option value="32" selected>32</option>
                                <option value="64">64</option>
                                <option value="128">128</option>
                                <option value="256">256</option>
                                <option value="512">512</option>
                            </select>
                        </div>
                        <button class="icon-btn" id="clearBtn" title="Clear Canvas (Delete)">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="icon-btn" id="gridToggleBtn" title="Toggle Grid (Ctrl+G)">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="icon-btn" id="zoomInBtn" title="Zoom In (Ctrl++)">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <button class="icon-btn" id="zoomOutBtn" title="Zoom Out (Ctrl+-)">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <button class="icon-btn" id="zoomResetBtn" title="Reset Zoom (Ctrl+0)">
                            <i class="fas fa-search"></i>
                        </button>
                        <button class="icon-btn" id="flipHorizontalBtn" title="Flip Horizontal">
                            <i class="fas fa-arrows-alt-h"></i>
                        </button>
                        <button class="icon-btn" id="flipVerticalBtn" title="Flip Vertical">
                            <i class="fas fa-arrows-alt-v"></i>
                        </button>
                    </div>
                    
                    <div class="toolbar-center">
                        <div class="canvas-info">
                            <span id="canvasSizeDisplay">32x32</span>
                            <span id="zoomLevel">100%</span>
                            <span id="cursorPosition">0,0</span>
                            <span id="selectedTool">Pencil</span>
                        </div>
                    </div>
                    
                    <div class="toolbar-right">
                        <div class="toggle-switch">
                            <input type="checkbox" id="snapToggle" checked>
                            <label for="snapToggle">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Snap</span>
                            </label>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="antiAliasToggle">
                            <label for="antiAliasToggle">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Anti-Alias</span>
                            </label>
                        </div>
                        <button class="icon-btn" id="sidebarToggle" title="Toggle Sidebars">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
                
                <div class="canvas-container">
                    <div class="canvas-wrapper">
                        <div class="canvas-grid" id="pixelCanvas"></div>
                        <div class="canvas-overlay" id="canvasOverlay"></div>
                        <div class="selection-overlay" id="selectionOverlay" style="display: none;"></div>
                        <div class="grid-overlay" id="gridOverlay"></div>
                    </div>
                </div>
            </section>
            
            <!-- Right Sidebar -->
            <nav class="sidebar right-sidebar">
                <div class="sidebar-section">
                    <h3 class="section-title"><i class="fas fa-layer-group"></i> Layers</h3>
                    <div class="layer-controls">
                        <button class="icon-btn" id="addLayerBtn" title="Add Layer (Ctrl+Shift+N)">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="icon-btn" id="deleteLayerBtn" title="Delete Layer">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="icon-btn" id="duplicateLayerBtn" title="Duplicate Layer (Ctrl+J)">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="icon-btn" id="mergeLayerBtn" title="Merge Layers (Ctrl+E)">
                            <i class="fas fa-compress"></i>
                        </button>
                        <button class="icon-btn" id="toggleVisibilityBtn" title="Toggle Visibility">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="icon-btn" id="lockLayerBtn" title="Lock/Unlock Layer">
                            <i class="fas fa-lock"></i>
                        </button>
                    </div>
                    
                    <div class="layers-list" id="layersList">
                        <!-- Layers will be dynamically added here -->
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="section-title"><i class="fas fa-sliders-h"></i> Layer Properties</h3>
                    <div class="control-group">
                        <div class="control-item">
                            <label>Opacity: <span id="layerOpacityValue">100%</span></label>
                            <input type="range" id="layerOpacity" min="0" max="100" value="100">
                        </div>
                        <div class="control-item">
                            <label>Blend Mode</label>
                            <select id="blendMode">
                                <option value="normal">Normal</option>
                                <option value="multiply">Multiply</option>
                                <option value="screen">Screen</option>
                                <option value="overlay">Overlay</option>
                                <option value="darken">Darken</option>
                                <option value="lighten">Lighten</option>
                                <option value="color-dodge">Color Dodge</option>
                                <option value="color-burn">Color Burn</option>
                                <option value="hard-light">Hard Light</option>
                                <option value="soft-light">Soft Light</option>
                                <option value="difference">Difference</option>
                                <option value="exclusion">Exclusion</option>
                                <option value="hue">Hue</option>
                                <option value="saturation">Saturation</option>
                                <option value="color">Color</option>
                                <option value="luminosity">Luminosity</option>
                            </select>
                        </div>
                        <div class="control-item">
                            <label>Layer Name</label>
                            <input type="text" id="layerName" value="Layer 1">
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="section-title"><i class="fas fa-magic"></i> Effects & Filters</h3>
                    <div class="effects-grid">
                        <button class="effect-btn" data-effect="invert" title="Invert Colors">
                            <i class="fas fa-adjust"></i>
                            <span>Invert</span>
                        </button>
                        <button class="effect-btn" data-effect="grayscale" title="Grayscale">
                            <i class="fas fa-tint"></i>
                            <span>Grayscale</span>
                        </button>
                        <button class="effect-btn" data-effect="sepia" title="Sepia">
                            <i class="fas fa-seedling"></i>
                            <span>Sepia</span>
                        </button>
                        <button class="effect-btn" data-effect="brightness" title="Brightness">
                            <i class="fas fa-sun"></i>
                            <span>Brightness</span>
                        </button>
                        <button class="effect-btn" data-effect="contrast" title="Contrast">
                            <i class="fas fa-adjust"></i>
                            <span>Contrast</span>
                        </button>
                        <button class="effect-btn" data-effect="saturation" title="Saturation">
                            <i class="fas fa-sliders-h"></i>
                            <span>Saturation</span>
                        </button>
                        <button class="effect-btn" data-effect="hue" title="Hue Rotate">
                            <i class="fas fa-rainbow"></i>
                            <span>Hue</span>
                        </button>
                        <button class="effect-btn" data-effect="blur" title="Blur">
                            <i class="fas fa-blur"></i>
                            <span>Blur</span>
                        </button>
                        <button class="effect-btn" data-effect="sharpen" title="Sharpen">
                            <i class="fas fa-bolt"></i>
                            <span>Sharpen</span>
                        </button>
                        <button class="effect-btn" data-effect="edge" title="Edge Detection">
                            <i class="fas fa-border-all"></i>
                            <span>Edge</span>
                        </button>
                        <button class="effect-btn" data-effect="noise" title="Add Noise">
                            <i class="fas fa-cloud"></i>
                            <span>Noise</span>
                        </button>
                        <button class="effect-btn" data-effect="pixelate" title="Pixelate">
                            <i class="fas fa-th-large"></i>
                            <span>Pixelate</span>
                        </button>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="section-title"><i class="fas fa-cog"></i> Advanced</h3>
                    <div class="control-group">
                        <div class="control-item">
                            <label>Pixel Size: <span id="pixelSizeValue">16px</span></label>
                            <input type="range" id="pixelSize" min="4" max="64" value="16">
                        </div>
                        <div class="control-item">
                            <button class="btn btn-small full-width" id="optimizeBtn">
                                <i class="fas fa-compress"></i> Optimize Colors
                            </button>
                        </div>
                        <div class="control-item">
                            <button class="btn btn-small full-width" id="paletteBtn">
                                <i class="fas fa-palette"></i> Generate Palette
                            </button>
                        </div>
                        <div class="control-item">
                            <button class="btn btn-small full-width" id="animationBtn">
                                <i class="fas fa-film"></i> Animation Mode
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
        </main>
        
        <!-- Footer -->
        <footer class="footer">
            <div class="footer-left">
                <div class="status-item">
                    <i class="fas fa-brush"></i>
                    <span><strong id="currentTool">Pencil</strong></span>
                </div>
                <div class="status-item">
                    <i class="fas fa-expand-arrows-alt"></i>
                    <span><strong id="canvasDimensions">32x32</strong></span>
                </div>
                <div class="status-item">
                    <i class="fas fa-palette"></i>
                    <span><strong id="currentColorHex">#FF0000</strong></span>
                </div>
                <div class="status-item">
                    <i class="fas fa-layer-group"></i>
                    <span>Layers: <strong id="layerCount">1</strong></span>
                </div>
                <div class="status-item">
                    <i class="fas fa-bezier-curve"></i>
                    <span>Size: <strong id="brushSizeDisplay">1px</strong></span>
                </div>
            </div>
            
            <div class="footer-right">
                <div class="status-item">
                    <i class="fas fa-history"></i>
                    <span>History: <strong id="historyCount">0</strong></span>
                </div>
                <div class="status-item">
                    <i class="fas fa-memory"></i>
                    <span id="memoryUsage">0 KB</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-clock"></i>
                    <span id="fpsCounter">60 FPS</span>
                </div>
                <button class="icon-btn small" id="helpBtn" title="Help & Shortcuts">
                    <i class="fas fa-question"></i>
                </button>
            </div>
        </footer>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-download"></i> Export Image</h2>
                <button class="modal-close" id="closeExportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-preview">
                    <canvas id="previewCanvas" width="256" height="256"></canvas>
                </div>
                
                <div class="export-options">
                    <div class="option-group">
                        <h3>Format</h3>
                        <div class="option-buttons">
                            <button class="option-btn active" data-format="png">PNG</button>
                            <button class="option-btn" data-format="jpg">JPG</button>
                            <button class="option-btn" data-format="webp">WebP</button>
                            <button class="option-btn" data-format="gif">GIF</button>
                            <button class="option-btn" data-format="svg">SVG</button>
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h3>Size Multiplier</h3>
                        <div class="option-buttons">
                            <button class="option-btn" data-scale="1">1x</button>
                            <button class="option-btn active" data-scale="2">2x</button>
                            <button class="option-btn" data-scale="4">4x</button>
                            <button class="option-btn" data-scale="8">8x</button>
                            <button class="option-btn" data-scale="16">16x</button>
                            <button class="option-btn" data-scale="32">32x</button>
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h3>Background</h3>
                        <div class="option-buttons">
                            <button class="option-btn active" data-bg="transparent">Transparent</button>
                            <button class="option-btn" data-bg="white">White</button>
                            <button class="option-btn" data-bg="black">Black</button>
                            <button class="option-btn" data-bg="checkered">Checkered</button>
                            <button class="option-btn" data-bg="custom">Custom</button>
                        </div>
                        <div id="customBgContainer" style="display: none; margin-top: 0.5rem;">
                            <input type="color" id="customBgColor" value="#ffffff">
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h3>Quality</h3>
                        <div class="option-buttons">
                            <button class="option-btn active" data-quality="high">High</button>
                            <button class="option-btn" data-quality="medium">Medium</button>
                            <button class="option-btn" data-quality="low">Low</button>
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h3>Animation (GIF only)</h3>
                        <div class="control-item">
                            <label>Frame Delay: <span id="gifDelayValue">100</span>ms</label>
                            <input type="range" id="gifDelay" min="10" max="500" value="100">
                        </div>
                        <div class="control-item">
                            <label>Loop Count: <span id="gifLoopsValue">0</span> (0 = infinite)</label>
                            <input type="range" id="gifLoops" min="0" max="100" value="0">
                        </div>
                    </div>
                </div>
                
                <div class="export-actions">
                    <button class="btn btn-primary" id="downloadBtn">
                        <i class="fas fa-download"></i> Download
                    </button>
                    <button class="btn" id="copyBtn">
                        <i class="fas fa-copy"></i> Copy to Clipboard
                    </button>
                    <button class="btn" id="shareBtn">
                        <i class="fas fa-share"></i> Share
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Project Modal -->
    <div class="modal" id="newProjectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> New Project</h2>
                <button class="modal-close" id="closeNewProjectModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="new-project-form">
                    <div class="form-group">
                        <label for="projectWidth">Width (pixels):</label>
                        <input type="number" id="projectWidth" min="8" max="2048" value="32">
                    </div>
                    <div class="form-group">
                        <label for="projectHeight">Height (pixels):</label>
                        <input type="number" id="projectHeight" min="8" max="2048" value="32">
                    </div>
                    <div class="form-group">
                        <label for="projectBg">Background Color:</label>
                        <input type="color" id="projectBg" value="#1a1a1a">
                    </div>
                    <div class="form-group">
                        <label for="projectTemplate">Template:</label>
                        <select id="projectTemplate">
                            <option value="blank">Blank Canvas</option>
                            <option value="pixelart" selected>Pixel Art (32x32)</option>
                            <option value="icon">Icon (64x64)</option>
                            <option value="sprite">Game Sprite (16x16)</option>
                            <option value="character">Character (32x48)</option>
                            <option value="tileset">Tileset (128x128)</option>
                            <option value="avatar">Avatar (128x128)</option>
                            <option value="banner">Banner (256x128)</option>
                            <option value="animation">Animation Frame (64x64)</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="createProjectBtn">
                            <i class="fas fa-check"></i> Create
                        </button>
                        <button class="btn" id="cancelProjectBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-question-circle"></i> Help & Shortcuts</h2>
                <button class="modal-close" id="closeHelpModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="help-content">
                    <div class="shortcut-section">
                        <h3>Tool Shortcuts</h3>
                        <div class="shortcuts-grid">
                            <div class="shortcut-item">
                                <kbd>P</kbd>
                                <span>Pencil Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>E</kbd>
                                <span>Eraser Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>B</kbd>
                                <span>Bucket Fill</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>I</kbd>
                                <span>Color Picker</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>L</kbd>
                                <span>Line Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>R</kbd>
                                <span>Rectangle Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>C</kbd>
                                <span>Circle Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>S</kbd>
                                <span>Spray Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>T</kbd>
                                <span>Text Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>V</kbd>
                                <span>Selection Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>M</kbd>
                                <span>Move Tool</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>G</kbd>
                                <span>Gradient Tool</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="shortcut-section">
                        <h3>Action Shortcuts</h3>
                        <div class="shortcuts-grid">
                            <div class="shortcut-item">
                                <kbd>Ctrl+Z</kbd>
                                <span>Undo</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+Y</kbd>
                                <span>Redo</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+S</kbd>
                                <span>Save Project</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+E</kbd>
                                <span>Export Image</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+N</kbd>
                                <span>New Project</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+O</kbd>
                                <span>Open Project</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+G</kbd>
                                <span>Toggle Grid</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl++</kbd>
                                <span>Zoom In</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+-</kbd>
                                <span>Zoom Out</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+0</kbd>
                                <span>Reset Zoom</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Delete</kbd>
                                <span>Clear Selection</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Esc</kbd>
                                <span>Cancel Selection</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="shortcut-section">
                        <h3>Layer Shortcuts</h3>
                        <div class="shortcuts-grid">
                            <div class="shortcut-item">
                                <kbd>Ctrl+Shift+N</kbd>
                                <span>New Layer</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+Shift+↑</kbd>
                                <span>Move Layer Up</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+Shift+↓</kbd>
                                <span>Move Layer Down</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+Shift+E</kbd>
                                <span>Merge Layers</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+Shift+V</kbd>
                                <span>Toggle Layer Visibility</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+Shift+L</kbd>
                                <span>Lock/Unlock Layer</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Ctrl+J</kbd>
                                <span>Duplicate Layer</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="shortcut-section">
                        <h3>Brush Shortcuts</h3>
                        <div class="shortcuts-grid">
                            <div class="shortcut-item">
                                <kbd>[</kbd>
                                <span>Decrease Brush Size</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>]</kbd>
                                <span>Increase Brush Size</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Shift+[</kbd>
                                <span>Decrease Opacity</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Shift+]</kbd>
                                <span>Increase Opacity</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>X</kbd>
                                <span>Swap Colors</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>D</kbd>
                                <span>Reset Colors</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>F</kbd>
                                <span>Fill with Foreground</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>Alt</kbd>
                                <span>Temporary Color Picker</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Import Image Modal -->
    <div class="modal" id="importModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-file-import"></i> Import Image</h2>
                <button class="modal-close" id="closeImportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="import-form">
                    <div class="form-group">
                        <label>Import Options</label>
                        <div class="option-buttons">
                            <button class="option-btn active" data-import="fit">Fit to Canvas</button>
                            <button class="option-btn" data-import="resize">Resize Canvas</button>
                            <button class="option-btn" data-import="layer">New Layer</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="importFile">Select Image:</label>
                        <input type="file" id="importFile" accept="image/*">
                    </div>
                    
                    <div class="form-group">
                        <label>Resize Method:</label>
                        <select id="resizeMethod">
                            <option value="nearest">Nearest Neighbor (Pixelated)</option>
                            <option value="bilinear">Bilinear (Smooth)</option>
                            <option value="lanczos">Lanczos (High Quality)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Dithering:</label>
                        <select id="ditheringMethod">
                            <option value="none">None</option>
                            <option value="floyd">Floyd-Steinberg</option>
                            <option value="ordered">Ordered</option>
                            <option value="atkinson">Atkinson</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Color Reduction:</label>
                        <select id="colorReduction">
                            <option value="auto">Auto (Based on image)</option>
                            <option value="2">2 Colors</option>
                            <option value="4">4 Colors</option>
                            <option value="8">8 Colors</option>
                            <option value="16">16 Colors</option>
                            <option value="32">32 Colors</option>
                            <option value="64">64 Colors</option>
                            <option value="256">256 Colors</option>
                        </select>
                    </div>
                    
                    <div class="import-preview">
                        <canvas id="importPreview" width="256" height="256"></canvas>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" id="confirmImportBtn" disabled>
                            <i class="fas fa-check"></i> Import Image
                        </button>
                        <button class="btn" id="cancelImportBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Resize Canvas Modal -->
    <div class="modal" id="resizeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-expand-alt"></i> Resize Canvas</h2>
                <button class="modal-close" id="closeResizeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="resize-form">
                    <div class="form-group">
                        <label for="resizeWidth">Width:</label>
                        <input type="number" id="resizeWidth" min="8" max="2048">
                    </div>
                    <div class="form-group">
                        <label for="resizeHeight">Height:</label>
                        <input type="number" id="resizeHeight" min="8" max="2048">
                    </div>
                    
                    <div class="form-group">
                        <label>Anchor Point:</label>
                        <div class="anchor-grid">
                            <button class="anchor-btn" data-anchor="nw">↖</button>
                            <button class="anchor-btn" data-anchor="n">↑</button>
                            <button class="anchor-btn" data-anchor="ne">↗</button>
                            <button class="anchor-btn" data-anchor="w">←</button>
                            <button class="anchor-btn active" data-anchor="center">●</button>
                            <button class="anchor-btn" data-anchor="e">→</button>
                            <button class="anchor-btn" data-anchor="sw">↙</button>
                            <button class="anchor-btn" data-anchor="s">↓</button>
                            <button class="anchor-btn" data-anchor="se">↘</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Background Color:</label>
                        <input type="color" id="resizeBg" value="#00000000">
                    </div>
                    
                    <div class="form-group">
                        <label>Resize Method:</label>
                        <div class="option-buttons">
                            <button class="option-btn active" data-resize="scale">Scale Content</button>
                            <button class="option-btn" data-resize="crop">Crop Content</button>
                            <button class="option-btn" data-resize="add">Add Padding</button>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" id="confirmResizeBtn">
                            <i class="fas fa-check"></i> Resize Canvas
                        </button>
                        <button class="btn" id="cancelResizeBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Animation Modal -->
    <div class="modal" id="animationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-film"></i> Animation</h2>
                <button class="modal-close" id="closeAnimationModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="animation-controls">
                    <div class="animation-preview">
                        <canvas id="animationCanvas" width="256" height="256"></canvas>
                    </div>
                    
                    <div class="animation-timeline" id="animationTimeline">
                        <!-- Frames will be added here -->
                    </div>
                    
                    <div class="animation-tools">
                        <button class="icon-btn" id="addFrameBtn" title="Add Frame">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="icon-btn" id="removeFrameBtn" title="Remove Frame">
                            <i class="fas fa-minus"></i>
                        </button>
                        <button class="icon-btn" id="duplicateFrameBtn" title="Duplicate Frame">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="icon-btn" id="playAnimationBtn" title="Play Animation">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="icon-btn" id="stopAnimationBtn" title="Stop Animation">
                            <i class="fas fa-stop"></i>
                        </button>
                    </div>
                    
                    <div class="control-group">
                        <div class="control-item">
                            <label>Frame Delay: <span id="frameDelayValue">100</span>ms</label>
                            <input type="range" id="frameDelay" min="10" max="1000" value="100">
                        </div>
                        <div class="control-item">
                            <label>Loop Count: <span id="loopCountValue">0</span> (0 = infinite)</label>
                            <input type="range" id="loopCount" min="0" max="100" value="0">
                        </div>
                        <div class="control-item">
                            <label>Onion Skin: <span id="onionOpacityValue">30%</span></label>
                            <input type="range" id="onionOpacity" min="0" max="100" value="30">
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" id="exportAnimationBtn">
                            <i class="fas fa-download"></i> Export GIF
                        </button>
                        <button class="btn" id="closeAnimationBtn">
                            <i class="fas fa-times"></i> Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Text Tool Modal -->
    <div class="modal" id="textModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-font"></i> Text Tool</h2>
                <button class="modal-close" id="closeTextModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="text-form">
                    <div class="form-group">
                        <label for="textInput">Text:</label>
                        <input type="text" id="textInput" placeholder="Enter text" maxlength="100">
                    </div>
                    <div class="form-group">
                        <label for="textSize">Size:</label>
                        <select id="textSize">
                            <option value="8">Small (8px)</option>
                            <option value="16" selected>Medium (16px)</option>
                            <option value="24">Large (24px)</option>
                            <option value="32">X-Large (32px)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="textStyle">Style:</label>
                        <select id="textStyle">
                            <option value="normal">Normal</option>
                            <option value="bold">Bold</option>
                            <option value="italic">Italic</option>
                            <option value="bolditalic">Bold Italic</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="textAlign">Alignment:</label>
                        <select id="textAlign">
                            <option value="left">Left</option>
                            <option value="center" selected>Center</option>
                            <option value="right">Right</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Anti-aliasing:</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="textAntiAlias" checked>
                            <label for="textAntiAlias">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Enabled</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="insertTextBtn">
                            <i class="fas fa-check"></i> Insert Text
                        </button>
                        <button class="btn" id="cancelTextBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Gradient Editor Modal -->
    <div class="modal" id="gradientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-sliders-h"></i> Gradient Editor</h2>
                <button class="modal-close" id="closeGradientModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="gradient-editor">
                    <div class="gradient-preview" id="gradientPreview"></div>
                    
                    <div class="gradient-stops" id="gradientStops">
                        <!-- Gradient stops will be added here -->
                    </div>
                    
                    <div class="control-group">
                        <div class="control-item">
                            <label>Gradient Type:</label>
                            <select id="gradientTypeSelect">
                                <option value="linear">Linear</option>
                                <option value="radial">Radial</option>
                                <option value="conic">Conic</option>
                            </select>
                        </div>
                        <div class="control-item">
                            <label>Angle: <span id="gradientAngleValue">0</span>°</label>
                            <input type="range" id="gradientAngle" min="0" max="360" value="0">
                        </div>
                        <div class="control-item">
                            <label>Repeat:</label>
                            <select id="gradientRepeat">
                                <option value="no-repeat">No Repeat</option>
                                <option value="repeat">Repeat</option>
                                <option value="repeat-x">Repeat X</option>
                                <option value="repeat-y">Repeat Y</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" id="applyGradientBtn">
                            <i class="fas fa-check"></i> Apply Gradient
                        </button>
                        <button class="btn" id="cancelGradientBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-info-circle"></i>
        </div>
        <div class="notification-content">
            <p id="notificationMessage">Message</p>
        </div>
        <button class="notification-close">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- Hidden elements for file operations -->
    <input type="file" id="projectFileInput" accept=".json,.pixelart,.pxl" style="display: none;">
    
    <!-- Hidden canvas for image processing -->
    <canvas id="hiddenCanvas" style="display: none;"></canvas>
    
    <script src="script.js"></script>
</body>
</html>