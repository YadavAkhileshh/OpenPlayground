class Calculator {
    constructor(previousOperand, currentOperand) {
        this.previousOperand = previousOperand;
        this.currentOperand = currentOperand;
        this.clear();
    }

    clear() {
        this.current = '';
        this.previous = '';
        this.operation = undefined;
        this.updateDisplay();
    }

    delete() {
        this.current = this.current.toString().slice(0, -1);
        this.updateDisplay();
    }

    appendNumber(number) {
        if (number === '.' && this.current.includes('.')) return;
        this.current += number;
        this.updateDisplay();
    }

    chooseOperation(operation) {
        if (this.current === '') return;
        if (this.previous !== '') {
            this.compute();
        }
        this.operation = operation;
        this.previous = this.current;
        this.current = '';
        this.updateDisplay();
    }

    compute() {
        let result;
        const prev = parseFloat(this.previous);
        const curr = parseFloat(this.current);
        if (isNaN(prev) || isNaN(curr)) return;

        switch (this.operation) {
            case '+':
                result = prev + curr;
                break;
            case '−':
                result = prev - curr;
                break;
            case '×':
                result = prev * curr;
                break;
            case '÷':
                result = prev / curr;
                break;
            case '%':
                result = prev % curr;
                break;
            default:
                return;
        }

        this.current = result;
        this.operation = undefined;
        this.previous = '';
        this.updateDisplay();
    }

    updateDisplay() {
        this.currentOperand.innerText = this.current || '0';
        this.previousOperand.innerText =
            this.operation ? `${this.previous} ${this.operation}` : '';
    }
}

const calculator = new Calculator(
    document.getElementById('previousOperand'),
    document.getElementById('currentOperand')
);

document.querySelectorAll('.btn-number').forEach(btn =>
    btn.addEventListener('click', () => calculator.appendNumber(btn.innerText))
);

document.querySelectorAll('.btn-operator').forEach(btn =>
    btn.addEventListener('click', () => calculator.chooseOperation(btn.innerText))
);

document.querySelector('.btn-equals').addEventListener('click', () => calculator.compute());
document.querySelector('.btn-clear').addEventListener('click', () => calculator.clear());
document.querySelector('.btn-delete').addEventListener('click', () => calculator.delete());
